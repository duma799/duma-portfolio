<nav
    x-data="{
        lastScroll: 0,
        scrolled: false,
        handleScroll() {
            const currentScroll = window.scrollY;
            this.scrolled = currentScroll > 100;
            this.lastScroll = currentScroll;
        }
    }"
    @scroll.window="handleScroll()"
    class="fixed top-0 w-full z-50"
>
    <!-- Full width nav (default state) -->
    <div
        :class="scrolled ? '-translate-y-full' : 'translate-y-0'"
        class="transition-transform duration-500 ease-out bg-dark-800/80 backdrop-blur-md border-b border-dark-600"
    >
        <div
            class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center"
        >
            <a href="/#home" class="text-xl font-bold gradient-text">Duma</a>
            <div class="flex items-center gap-6 text-sm text-text-secondary">
                <a href="/#home" class="hover:text-accent-blue transition"
                    >Home</a
                >
                <a href="/#about" class="hover:text-accent-blue transition"
                    >About</a
                >
                <a href="/#projects" class="hover:text-accent-blue transition"
                    >Projects</a
                >

                <!-- Theme Switcher -->
                <div x-data="{ open: false }" class="relative">
                    <button
                        @click="open = !open"
                        class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-dark-700/50 border border-dark-600 hover:border-accent-blue transition"
                    >
                        <svg
                            class="w-4 h-4"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"
                            />
                        </svg>
                        <span class="hidden sm:inline">Theme</span>
                    </button>

                    <div
                        x-show="open"
                        @click.away="open = false"
                        x-transition:enter="transition ease-out duration-100"
                        x-transition:enter-start="opacity-0 scale-95"
                        x-transition:enter-end="opacity-100 scale-100"
                        x-transition:leave="transition ease-in duration-75"
                        x-transition:leave-start="opacity-100 scale-100"
                        x-transition:leave-end="opacity-0 scale-95"
                        class="absolute right-0 mt-2 w-44 rounded-lg bg-dark-800 border border-dark-600 shadow-xl overflow-hidden max-h-80 overflow-y-auto"
                    >
                        <!-- Dark Themes -->
                        <div
                            class="px-3 py-1.5 text-xs text-text-muted uppercase tracking-wider bg-dark-700/50"
                        >
                            Dark
                        </div>
                        <button
                            @click="setTheme('tokyo'); open = false"
                            class="w-full px-4 py-2.5 text-left hover:bg-dark-700 transition flex items-center gap-3"
                            :class="document.documentElement.getAttribute('data-theme') === 'tokyo' ? 'text-accent-cyan' : ''"
                        >
                            <span
                                class="w-3 h-3 rounded-full bg-[#7aa2f7]"
                            ></span>
                            Tokyo Night
                        </button>
                        <button
                            @click="setTheme('catppuccin'); open = false"
                            class="w-full px-4 py-2.5 text-left hover:bg-dark-700 transition flex items-center gap-3"
                            :class="document.documentElement.getAttribute('data-theme') === 'catppuccin' ? 'text-accent-cyan' : ''"
                        >
                            <span
                                class="w-3 h-3 rounded-full bg-[#cba6f7]"
                            ></span>
                            Catppuccin
                        </button>
                        <button
                            @click="setTheme('gruvbox'); open = false"
                            class="w-full px-4 py-2.5 text-left hover:bg-dark-700 transition flex items-center gap-3"
                            :class="document.documentElement.getAttribute('data-theme') === 'gruvbox' ? 'text-accent-cyan' : ''"
                        >
                            <span
                                class="w-3 h-3 rounded-full bg-[#fe8019]"
                            ></span>
                            Gruvbox
                            <span
                                class="text-[#fabd2f] text-sm ml-auto leading-none"
                                style="font-family: system-ui, sans-serif"
                                >★</span
                            >
                        </button>
                        <button
                            @click="setTheme('material'); open = false"
                            class="w-full px-4 py-2.5 text-left hover:bg-dark-700 transition flex items-center gap-3"
                            :class="document.documentElement.getAttribute('data-theme') === 'material' ? 'text-accent-cyan' : ''"
                        >
                            <span
                                class="w-3 h-3 rounded-full bg-[#82aaff]"
                            ></span>
                            Material
                        </button>
                        <button
                            @click="setTheme('nord'); open = false"
                            class="w-full px-4 py-2.5 text-left hover:bg-dark-700 transition flex items-center gap-3"
                            :class="document.documentElement.getAttribute('data-theme') === 'nord' ? 'text-accent-cyan' : ''"
                        >
                            <span
                                class="w-3 h-3 rounded-full bg-[#88c0d0]"
                            ></span>
                            Nord
                        </button>
                        <!-- Light Themes -->
                        <div
                            class="px-3 py-1.5 text-xs text-text-muted uppercase tracking-wider bg-dark-700/50 border-t border-dark-600"
                        >
                            Light
                        </div>
                        <button
                            @click="setTheme('tokyo-light'); open = false"
                            class="w-full px-4 py-2.5 text-left hover:bg-dark-700 transition flex items-center gap-3"
                            :class="document.documentElement.getAttribute('data-theme') === 'tokyo-light' ? 'text-accent-cyan' : ''"
                        >
                            <span
                                class="w-3 h-3 rounded-full bg-[#2e7de9] border border-dark-500"
                            ></span>
                            Tokyo Day
                        </button>
                        <button
                            @click="setTheme('catppuccin-light'); open = false"
                            class="w-full px-4 py-2.5 text-left hover:bg-dark-700 transition flex items-center gap-3"
                            :class="document.documentElement.getAttribute('data-theme') === 'catppuccin-light' ? 'text-accent-cyan' : ''"
                        >
                            <span
                                class="w-3 h-3 rounded-full bg-[#8839ef] border border-dark-500"
                            ></span>
                            Catppuccin Latte
                        </button>
                        <button
                            @click="setTheme('gruvbox-light'); open = false"
                            class="w-full px-4 py-2.5 text-left hover:bg-dark-700 transition flex items-center gap-3"
                            :class="document.documentElement.getAttribute('data-theme') === 'gruvbox-light' ? 'text-accent-cyan' : ''"
                        >
                            <span
                                class="w-3 h-3 rounded-full bg-[#d65d0e] border border-dark-500"
                            ></span>
                            Gruvbox Light
                            <span
                                class="text-[#d79921] text-sm ml-auto leading-none"
                                style="font-family: system-ui, sans-serif"
                                >★</span
                            >
                        </button>
                        <button
                            @click="setTheme('material-light'); open = false"
                            class="w-full px-4 py-2.5 text-left hover:bg-dark-700 transition flex items-center gap-3"
                            :class="document.documentElement.getAttribute('data-theme') === 'material-light' ? 'text-accent-cyan' : ''"
                        >
                            <span
                                class="w-3 h-3 rounded-full bg-[#6182b8] border border-dark-500"
                            ></span>
                            Material Light
                        </button>
                        <button
                            @click="setTheme('nord-light'); open = false"
                            class="w-full px-4 py-2.5 text-left hover:bg-dark-700 transition flex items-center gap-3"
                            :class="document.documentElement.getAttribute('data-theme') === 'nord-light' ? 'text-accent-cyan' : ''"
                        >
                            <span
                                class="w-3 h-3 rounded-full bg-[#5e81ac] border border-dark-500"
                            ></span>
                            Nord Light
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Compact floating nav (scrolled state) -->
    <div
        :class="scrolled ? 'translate-y-0' : '-translate-y-[calc(100%+2rem)]'"
        class="fixed top-4 left-1/2 -translate-x-1/2 transition-transform duration-500 ease-out"
    >
        <div
            class="flex items-center gap-1 px-2 py-2 rounded-full bg-dark-800/40 backdrop-blur-xl border border-white/10 shadow-2xl shadow-black/20"
        >
            <!-- Logo/Brand -->
            <a
                href="/#home"
                class="flex items-center gap-2 px-4 py-2 rounded-full hover:bg-white/5 transition-colors duration-200"
            >
                <span class="text-accent-green text-sm mono">&gt;_</span>
                <span
                    class="text-text-primary text-sm font-medium tracking-wide uppercase"
                    >Portfolio</span
                >
                <span class="text-text-muted text-sm">/</span>
                <span class="text-text-secondary text-sm font-medium">V2</span>
            </a>

            <!-- Divider -->
            <div class="w-px h-6 bg-white/10"></div>

            <!-- Navigation Links -->
            <div class="flex items-center">
                <a
                    href="/#projects"
                    class="px-4 py-2 text-sm text-text-muted hover:text-text-primary uppercase tracking-wider transition-colors duration-200"
                    >Projects</a
                >
                <a
                    href="/#stack"
                    class="px-4 py-2 text-sm text-text-muted hover:text-text-primary uppercase tracking-wider transition-colors duration-200"
                    >Stack</a
                >
                <a
                    href="/#process"
                    class="px-4 py-2 text-sm text-text-muted hover:text-text-primary uppercase tracking-wider transition-colors duration-200"
                    >Process</a
                >
            </div>

            <!-- Divider -->
            <div class="w-px h-6 bg-white/10"></div>

            <!-- Status Badge -->
            <a
                href="https://t.me/duma799"
                target="_blank"
                rel="noopener noreferrer"
                class="group flex items-center gap-2 px-4 py-2 transition-all duration-300"
            >
                <span
                    class="w-2 h-2 rounded-full bg-accent-green group-hover:bg-accent-blue animate-pulse transition-colors duration-300"
                ></span>
                <span
                    class="text-accent-green group-hover:text-accent-blue text-sm uppercase tracking-wider whitespace-nowrap transition-colors duration-300"
                    >Available for Hire</span
                >
                <!-- Telegram Icon -->
                <img
                    src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Telegram_2019_Logo.svg/500px-Telegram_2019_Logo.svg.png"
                    alt="Telegram"
                    class="w-0 h-4 group-hover:w-4 opacity-0 group-hover:opacity-100 transition-all duration-300"
                />
            </a>
        </div>
    </div>
</nav>
