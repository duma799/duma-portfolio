<nav
    x-data="{
        lastScroll: 0,
        scrolled: false,
        handleScroll() {
            const currentScroll = window.scrollY;
            this.scrolled = currentScroll > 100;
            this.lastScroll = currentScroll;
        }
    }"
    @scroll.window="handleScroll()"
    class="fixed top-0 w-full z-50"
>
    <!-- Full width nav (default state) -->
    <div
        :class="scrolled ? '-translate-y-full' : 'translate-y-0'"
        class="transition-transform duration-500 ease-out bg-dark-800/80 backdrop-blur-md border-b border-dark-600"
    >
        <div
            class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center"
        >
            <a href="/#home" class="text-xl font-bold gradient-text">Duma</a>
            <div class="flex items-center gap-6 text-sm text-text-secondary">
                <a href="/#home" class="hover:text-accent-blue transition"
                    >Home</a
                >
                <a href="/#about" class="hover:text-accent-blue transition"
                    >About</a
                >
                <a href="/#projects" class="hover:text-accent-blue transition"
                    >Projects</a
                >

                <!-- Theme Switcher -->
                <div x-data="{ open: false, submenu: null }" class="relative">
                    <button
                        @click="open = !open; submenu = null"
                        class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-dark-700/50 border border-dark-600 hover:border-accent-blue transition"
                    >
                        <svg
                            class="w-4 h-4"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"
                            />
                        </svg>
                        <span class="hidden sm:inline">Theme</span>
                    </button>

                    <div
                        x-show="open"
                        @click.away="open = false; submenu = null"
                        x-transition:enter="transition ease-out duration-100"
                        x-transition:enter-start="opacity-0 scale-95"
                        x-transition:enter-end="opacity-100 scale-100"
                        x-transition:leave="transition ease-in duration-75"
                        x-transition:leave-start="opacity-100 scale-100"
                        x-transition:leave-end="opacity-0 scale-95"
                        class="absolute right-0 mt-2 w-44 rounded-lg bg-dark-800 border border-dark-600 shadow-xl overflow-visible"
                    >
                        <!-- Tokyo -->
                        <div class="relative">
                            <button
                                @click="submenu = submenu === 'tokyo' ? null : 'tokyo'"
                                class="w-full px-4 py-2.5 hover:bg-dark-700 transition flex items-center gap-3"
                                :class="document.documentElement.getAttribute('data-theme')?.startsWith('tokyo') ? 'text-accent-cyan' : ''"
                            >
                                <span
                                    class="w-3 h-3 rounded-full bg-[#7aa2f7]"
                                ></span>
                                <span class="flex-1 text-left">Tokyo</span>
                                <svg
                                    class="w-4 h-4"
                                    fill="none"
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M9 5l7 7-7 7"
                                    />
                                </svg>
                            </button>
                            <div
                                x-show="submenu === 'tokyo'"
                                x-transition
                                class="absolute left-full top-0 ml-1 flex items-center gap-1 px-2 py-1.5 rounded-lg bg-dark-800 border border-dark-600 shadow-xl text-sm"
                            >
                                <button
                                    @click="setTheme('tokyo'); open = false"
                                    class="px-2 py-1 rounded hover:bg-dark-600 transition"
                                    :class="document.documentElement.getAttribute('data-theme') === 'tokyo' ? 'bg-dark-600 text-accent-cyan' : ''"
                                >
                                    Dark
                                </button>
                                <button
                                    @click="setTheme('tokyo-light'); open = false"
                                    class="px-2 py-1 rounded hover:bg-dark-600 transition"
                                    :class="document.documentElement.getAttribute('data-theme') === 'tokyo-light' ? 'bg-dark-600 text-accent-cyan' : ''"
                                >
                                    Light
                                </button>
                            </div>
                        </div>

                        <!-- Catppuccin -->
                        <div class="relative">
                            <button
                                @click="submenu = submenu === 'catppuccin' ? null : 'catppuccin'"
                                class="w-full px-4 py-2.5 hover:bg-dark-700 transition flex items-center gap-3"
                                :class="document.documentElement.getAttribute('data-theme')?.startsWith('catppuccin') ? 'text-accent-cyan' : ''"
                            >
                                <span
                                    class="w-3 h-3 rounded-full bg-[#cba6f7]"
                                ></span>
                                <span class="flex-1 text-left">Catppuccin</span>
                                <svg
                                    class="w-4 h-4"
                                    fill="none"
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M9 5l7 7-7 7"
                                    />
                                </svg>
                            </button>
                            <div
                                x-show="submenu === 'catppuccin'"
                                x-transition
                                class="absolute left-full top-0 ml-1 flex items-center gap-1 px-2 py-1.5 rounded-lg bg-dark-800 border border-dark-600 shadow-xl text-sm"
                            >
                                <button
                                    @click="setTheme('catppuccin'); open = false"
                                    class="px-2 py-1 rounded hover:bg-dark-600 transition"
                                    :class="document.documentElement.getAttribute('data-theme') === 'catppuccin' ? 'bg-dark-600 text-accent-cyan' : ''"
                                >
                                    Dark
                                </button>
                                <button
                                    @click="setTheme('catppuccin-light'); open = false"
                                    class="px-2 py-1 rounded hover:bg-dark-600 transition"
                                    :class="document.documentElement.getAttribute('data-theme') === 'catppuccin-light' ? 'bg-dark-600 text-accent-cyan' : ''"
                                >
                                    Light
                                </button>
                            </div>
                        </div>

                        <!-- Gruvbox -->
                        <div class="relative">
                            <button
                                @click="submenu = submenu === 'gruvbox' ? null : 'gruvbox'"
                                class="w-full px-4 py-2.5 hover:bg-dark-700 transition flex items-center gap-3"
                                :class="document.documentElement.getAttribute('data-theme')?.startsWith('gruvbox') ? 'text-accent-cyan' : ''"
                            >
                                <span
                                    class="w-3 h-3 rounded-full bg-[#fe8019]"
                                ></span>
                                <span class="flex-1 text-left">Gruvbox</span>
                                <span
                                    class="text-[#fabd2f] text-sm leading-none"
                                    style="font-family: system-ui, sans-serif"
                                    >â˜…</span
                                >
                                <svg
                                    class="w-4 h-4"
                                    fill="none"
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M9 5l7 7-7 7"
                                    />
                                </svg>
                            </button>
                            <div
                                x-show="submenu === 'gruvbox'"
                                x-transition
                                class="absolute left-full top-0 ml-1 flex items-center gap-1 px-2 py-1.5 rounded-lg bg-dark-800 border border-dark-600 shadow-xl text-sm"
                            >
                                <button
                                    @click="setTheme('gruvbox'); open = false"
                                    class="px-2 py-1 rounded hover:bg-dark-600 transition"
                                    :class="document.documentElement.getAttribute('data-theme') === 'gruvbox' ? 'bg-dark-600 text-accent-cyan' : ''"
                                >
                                    Dark
                                </button>
                                <button
                                    @click="setTheme('gruvbox-light'); open = false"
                                    class="px-2 py-1 rounded hover:bg-dark-600 transition"
                                    :class="document.documentElement.getAttribute('data-theme') === 'gruvbox-light' ? 'bg-dark-600 text-accent-cyan' : ''"
                                >
                                    Light
                                </button>
                            </div>
                        </div>

                        <!-- Material -->
                        <div class="relative">
                            <button
                                @click="submenu = submenu === 'material' ? null : 'material'"
                                class="w-full px-4 py-2.5 hover:bg-dark-700 transition flex items-center gap-3"
                                :class="document.documentElement.getAttribute('data-theme')?.startsWith('material') ? 'text-accent-cyan' : ''"
                            >
                                <span
                                    class="w-3 h-3 rounded-full bg-[#82aaff]"
                                ></span>
                                <span class="flex-1 text-left">Material</span>
                                <svg
                                    class="w-4 h-4"
                                    fill="none"
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M9 5l7 7-7 7"
                                    />
                                </svg>
                            </button>
                            <div
                                x-show="submenu === 'material'"
                                x-transition
                                class="absolute left-full top-0 ml-1 flex items-center gap-1 px-2 py-1.5 rounded-lg bg-dark-800 border border-dark-600 shadow-xl text-sm"
                            >
                                <button
                                    @click="setTheme('material'); open = false"
                                    class="px-2 py-1 rounded hover:bg-dark-600 transition"
                                    :class="document.documentElement.getAttribute('data-theme') === 'material' ? 'bg-dark-600 text-accent-cyan' : ''"
                                >
                                    Dark
                                </button>
                                <button
                                    @click="setTheme('material-light'); open = false"
                                    class="px-2 py-1 rounded hover:bg-dark-600 transition"
                                    :class="document.documentElement.getAttribute('data-theme') === 'material-light' ? 'bg-dark-600 text-accent-cyan' : ''"
                                >
                                    Light
                                </button>
                            </div>
                        </div>

                        <!-- Nord -->
                        <div class="relative">
                            <button
                                @click="submenu = submenu === 'nord' ? null : 'nord'"
                                class="w-full px-4 py-2.5 hover:bg-dark-700 transition flex items-center gap-3"
                                :class="document.documentElement.getAttribute('data-theme')?.startsWith('nord') ? 'text-accent-cyan' : ''"
                            >
                                <span
                                    class="w-3 h-3 rounded-full bg-[#88c0d0]"
                                ></span>
                                <span class="flex-1 text-left">Nord</span>
                                <svg
                                    class="w-4 h-4"
                                    fill="none"
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M9 5l7 7-7 7"
                                    />
                                </svg>
                            </button>
                            <div
                                x-show="submenu === 'nord'"
                                x-transition
                                class="absolute left-full top-0 ml-1 flex items-center gap-1 px-2 py-1.5 rounded-lg bg-dark-800 border border-dark-600 shadow-xl text-sm"
                            >
                                <button
                                    @click="setTheme('nord'); open = false"
                                    class="px-2 py-1 rounded hover:bg-dark-600 transition"
                                    :class="document.documentElement.getAttribute('data-theme') === 'nord' ? 'bg-dark-600 text-accent-cyan' : ''"
                                >
                                    Dark
                                </button>
                                <button
                                    @click="setTheme('nord-light'); open = false"
                                    class="px-2 py-1 rounded hover:bg-dark-600 transition"
                                    :class="document.documentElement.getAttribute('data-theme') === 'nord-light' ? 'bg-dark-600 text-accent-cyan' : ''"
                                >
                                    Light
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Compact floating nav (scrolled state) -->
    <div
        :class="scrolled ? 'translate-y-0' : '-translate-y-[calc(100%+2rem)]'"
        class="fixed top-4 left-1/2 -translate-x-1/2 transition-transform duration-500 ease-out"
    >
        <div
            class="flex items-center gap-1 px-2 py-2 rounded-full bg-dark-800/40 backdrop-blur-xl border border-white/10 shadow-2xl shadow-black/20"
        >
            <!-- Logo/Brand -->
            <a
                href="/#home"
                class="flex items-center gap-2 px-4 py-2 rounded-full hover:bg-white/5 transition-colors duration-200"
            >
                <span class="text-accent-green text-sm mono">&gt;_</span>
                <span
                    class="text-text-primary text-sm font-medium tracking-wide uppercase"
                    >Portfolio</span
                >
                <span class="text-text-muted text-sm">/</span>
                <span class="text-text-secondary text-sm font-medium">V2</span>
            </a>

            <!-- Divider -->
            <div class="w-px h-6 bg-white/10"></div>

            <!-- Navigation Links -->
            <div class="flex items-center">
                <a
                    href="/#projects"
                    class="px-4 py-2 text-sm text-text-muted hover:text-text-primary uppercase tracking-wider transition-colors duration-200"
                    >Projects</a
                >
                <a
                    href="/#stack"
                    class="px-4 py-2 text-sm text-text-muted hover:text-text-primary uppercase tracking-wider transition-colors duration-200"
                    >Stack</a
                >
                <a
                    href="/#process"
                    class="px-4 py-2 text-sm text-text-muted hover:text-text-primary uppercase tracking-wider transition-colors duration-200"
                    >Process</a
                >
            </div>

            <!-- Divider -->
            <div class="w-px h-6 bg-white/10"></div>

            <!-- Status Badge -->
            <a
                href="https://t.me/duma799"
                target="_blank"
                rel="noopener noreferrer"
                class="group flex items-center gap-2 px-4 py-2 transition-all duration-300"
            >
                <span
                    class="w-2 h-2 rounded-full bg-accent-green group-hover:bg-accent-blue animate-pulse transition-colors duration-300"
                ></span>
                <span
                    class="text-accent-green group-hover:text-accent-blue text-sm uppercase tracking-wider whitespace-nowrap transition-colors duration-300"
                    >Available for Hire</span
                >
                <!-- Telegram Icon -->
                <img
                    src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Telegram_2019_Logo.svg/500px-Telegram_2019_Logo.svg.png"
                    alt="Telegram"
                    class="w-0 h-4 group-hover:w-4 opacity-0 group-hover:opacity-100 transition-all duration-300"
                />
            </a>
        </div>
    </div>
</nav>
