{% extends "base.html" %} {% block content %}
<section class="py-20">
    <div class="max-w-6xl mx-auto px-6">
        <h1 class="text-4xl font-bold mb-4 gradient-text">Projects</h1>
        <p class="text-gray-400 mb-12">
            My open source projects and dotfiles configurations.
        </p>

        <div
            id="projects-list"
            class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"
            hx-get="/api/github/repos"
            hx-trigger="load"
            hx-swap="innerHTML"
        >
            <div class="col-span-full text-center py-12 text-gray-500">
                Loading projects...
            </div>
        </div>
    </div>
</section>
{% endblock %} {% block scripts %}
<script>
    document.body.addEventListener("htmx:afterSwap", function (evt) {
        if (evt.detail.target.id === "projects-list") {
            const repos = JSON.parse(evt.detail.xhr.responseText);
            let html = "";
            repos.slice(0, 9).forEach((repo) => {
                html += `
                <a href="${repo.html_url}" target="_blank"
                   class="bg-dark-800 rounded-xl p-6 border border-dark-600 hover:border-accent-500 transition block">
                    <h3 class="text-xl font-semibold mb-2">${repo.name}</h3>
                    <p class="text-gray-400 text-sm mb-4">${repo.description || "No description"}</p>
                    <div class="flex items-center gap-4 text-sm text-gray-500">
                        ${repo.language ? `<span>${repo.language}</span>` : ""}
                        <span>${repo.stargazers_count} stars</span>
                    </div>
                </a>
            `;
            });
            evt.detail.target.innerHTML = html;
        }
    });
</script>
{% endblock %}
