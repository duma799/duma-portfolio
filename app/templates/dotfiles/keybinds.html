{% extends "base.html" %} {% block head %}
<style>
    .keyboard {
        background: rgba(26, 27, 38, 0.6);
        border: 1px solid #292e42;
        border-radius: 16px;
        padding: 20px;
    }
    .keyboard-row {
        display: flex;
        justify-content: center;
        gap: 6px;
        margin-bottom: 6px;
    }
    .key {
        background: #1f2335;
        border: 1px solid #292e42;
        border-radius: 8px;
        min-width: 44px;
        height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        color: #565f89;
        cursor: pointer;
        transition: all 0.2s;
    }
    .key:hover {
        background: #292e42;
        border-color: #3b4261;
        color: #a9b1d6;
        transform: translateY(-2px);
    }
    .key.active {
        background: linear-gradient(135deg, #7aa2f7, #5d7cbf);
        border-color: #7aa2f7;
        color: #1a1b26;
        box-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
    }
    .key.modifier {
        background: linear-gradient(135deg, #bb9af7, #9d7cd8);
        border-color: #bb9af7;
        color: #1a1b26;
    }
    .key.w-1 {
        min-width: 60px;
    }
    .key.w-2 {
        min-width: 80px;
    }
    .key.w-3 {
        min-width: 100px;
    }
    .key.space {
        min-width: 280px;
    }
</style>
{% endblock %} {% block content %}
<section class="py-12" x-data="keyboardViz()">
    <div class="max-w-5xl mx-auto px-6">
        <h1 class="text-3xl font-bold mb-2 gradient-text">
            Keyboard Shortcuts
        </h1>
        <p class="text-text-secondary mb-8">
            Interactive visualization of my keybindings
        </p>

        <div class="flex gap-2 mb-8">
            <button
                @click='switchPlatform("yabai")'
                :class='platform === "yabai" ? "bg-accent-blue text-dark-900" : "bg-dark-700 text-text-secondary hover:text-text-primary"'
                class="px-4 py-2 rounded-lg transition"
            >
                Yabai (macOS)
            </button>
            <button
                @click='switchPlatform("hyprland")'
                :class='platform === "hyprland" ? "bg-accent-blue text-dark-900" : "bg-dark-700 text-text-secondary hover:text-text-primary"'
                class="px-4 py-2 rounded-lg transition"
            >
                Hyprland (Linux)
            </button>
        </div>

        <div
            class="bg-dark-700 border border-dark-600 rounded-xl p-6 mb-8 flex items-center gap-4"
        >
            <div
                class="w-14 h-14 bg-gradient-to-br from-accent-orange to-accent-red rounded-xl flex items-center justify-content-center text-2xl"
            >
                &#9000;
            </div>
            <div>
                <h2
                    class="text-lg font-semibold text-text-primary"
                    x-text="hoverInfo.title"
                >
                    Hover a key
                </h2>
                <p class="text-text-muted" x-text="hoverInfo.desc">
                    Hover one of the highlighted keys to see the keybinding
                </p>
            </div>
        </div>

        <div class="keyboard mb-8">
            <template x-for="(row, ri) in keyboardLayout" :key="ri">
                <div class="keyboard-row">
                    <template x-for="key in row" :key="key.code">
                        <div
                            class="key"
                            :class="getKeyClasses(key)"
                            @mouseenter="onKeyHover(key)"
                            @mouseleave="onKeyLeave()"
                            x-text="key.label"
                        ></div>
                    </template>
                </div>
            </template>
        </div>

        <div class="bg-dark-700 rounded-xl border border-dark-600 p-6">
            <h3
                class="text-sm font-semibold text-text-muted uppercase tracking-wide mb-4"
            >
                Keybindings
            </h3>
            <template x-if="loading">
                <p class="text-text-muted">Loading keybindings...</p>
            </template>
            <template
                x-for="(group, category) in groupedKeybinds"
                :key="category"
            >
                <div class="mb-6">
                    <h4
                        class="text-accent-blue font-medium mb-3"
                        x-text="category"
                    ></h4>
                    <template x-for="kb in group" :key="kb.key + kb.action">
                        <div
                            class="flex justify-between py-3 border-b border-dark-600 last:border-0 hover:bg-dark-600/50 px-2 -mx-2 rounded transition"
                            @mouseenter="highlightKeybind(kb)"
                            @mouseleave="clearHighlight()"
                        >
                            <span
                                class="font-medium text-text-primary"
                                x-text="formatKeybind(kb)"
                            ></span>
                            <span
                                class="text-text-secondary"
                                x-text="kb.action"
                            ></span>
                        </div>
                    </template>
                </div>
            </template>
        </div>
    </div>
</section>
{% endblock %} {% block scripts %}
<script src="/static/js/keyboard.js"></script>
{% endblock %}
