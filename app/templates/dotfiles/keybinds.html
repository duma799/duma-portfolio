{% extends "base.html" %} {% block head %}
<style>
    .keyboard {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 16px;
        padding: 20px;
    }
    .keyboard-row {
        display: flex;
        justify-content: center;
        gap: 6px;
        margin-bottom: 6px;
    }
    .key {
        background: #2d3748;
        border: 1px solid #4a5568;
        border-radius: 8px;
        min-width: 44px;
        height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        color: #a0aec0;
        cursor: pointer;
        transition: all 0.2s;
    }
    .key:hover {
        background: #3d4a5c;
        transform: translateY(-2px);
    }
    .key.active {
        background: linear-gradient(135deg, #3b82f6, #2563eb);
        border-color: #60a5fa;
        color: #fff;
        box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
    }
    .key.modifier {
        background: linear-gradient(135deg, #dc2626, #b91c1c);
        border-color: #ef4444;
        color: #fff;
    }
    .key.w-1 {
        min-width: 60px;
    }
    .key.w-2 {
        min-width: 80px;
    }
    .key.w-3 {
        min-width: 100px;
    }
    .key.space {
        min-width: 280px;
    }
</style>
{% endblock %} {% block content %}
<section class="py-12" x-data="keyboardViz()">
    <div class="max-w-5xl mx-auto px-6">
        <h1 class="text-3xl font-bold mb-2 gradient-text">
            Keyboard Shortcuts
        </h1>
        <p class="text-gray-400 mb-8">
            Interactive visualization of my keybindings
        </p>

        <div class="flex gap-2 mb-8">
            <button
                @click='switchPlatform("yabai")'
                :class='platform === "yabai" ? "bg-accent-500" : "bg-dark-700"'
                class="px-4 py-2 rounded-lg transition"
            >
                Yabai (macOS)
            </button>
            <button
                @click='switchPlatform("hyprland")'
                :class='platform === "hyprland" ? "bg-accent-500" : "bg-dark-700"'
                class="px-4 py-2 rounded-lg transition"
            >
                Hyprland (Linux)
            </button>
        </div>

        <div
            class="bg-dark-800 border border-dark-600 rounded-xl p-6 mb-8 flex items-center gap-4"
        >
            <div
                class="w-14 h-14 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl flex items-center justify-content-center text-2xl"
            >
                &#9000;
            </div>
            <div>
                <h2 class="text-lg font-semibold" x-text="hoverInfo.title">
                    Hover a key
                </h2>
                <p class="text-gray-400" x-text="hoverInfo.desc">
                    Hover one of the highlighted keys to see the keybinding
                </p>
            </div>
        </div>

        <div class="keyboard mb-8">
            <template x-for="(row, ri) in keyboardLayout" :key="ri">
                <div class="keyboard-row">
                    <template x-for="key in row" :key="key.code">
                        <div
                            class="key"
                            :class="getKeyClasses(key)"
                            @mouseenter="onKeyHover(key)"
                            @mouseleave="onKeyLeave()"
                            x-text="key.label"
                        ></div>
                    </template>
                </div>
            </template>
        </div>

        <div class="bg-dark-800 rounded-xl border border-dark-600 p-6">
            <h3
                class="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-4"
            >
                Keybindings
            </h3>
            <template x-if="loading">
                <p class="text-gray-400">Loading keybindings...</p>
            </template>
            <template
                x-for="(group, category) in groupedKeybinds"
                :key="category"
            >
                <div class="mb-6">
                    <h4
                        class="text-accent-500 font-medium mb-3"
                        x-text="category"
                    ></h4>
                    <template x-for="kb in group" :key="kb.key + kb.action">
                        <div
                            class="flex justify-between py-3 border-b border-dark-600 last:border-0"
                            @mouseenter="highlightKeybind(kb)"
                            @mouseleave="clearHighlight()"
                        >
                            <span
                                class="font-medium"
                                x-text="formatKeybind(kb)"
                            ></span>
                            <span
                                class="text-gray-400"
                                x-text="kb.action"
                            ></span>
                        </div>
                    </template>
                </div>
            </template>
        </div>
    </div>
</section>
{% endblock %} {% block scripts %}
<script src="/static/js/keyboard.js"></script>
{% endblock %}
